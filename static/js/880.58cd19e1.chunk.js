"use strict";(self.webpackChunkyoutube_clone=self.webpackChunkyoutube_clone||[]).push([[880],{8880:function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var i=n(9439),s=n(2791),r=n(6796),a=n(6733),c=n(7689),l=n(184);function o(e){var t=e.videoRef,n=e.duration,r=e.setDuration,a=(0,s.useState)(0),c=(0,i.Z)(a,2),o=c[0],d=c[1],u=(0,s.useState)(!1),v=(0,i.Z)(u,2),h=v[0],f=v[1],m=(0,s.useRef)();(0,s.useEffect)((function(){var e=setInterval((function(){h||d(t.current.currentTime)}),1e3);return function(){return clearInterval(e)}}),[h,t]),(0,s.useEffect)((function(){r(t.current.duration)}),[t]);var x=o/n*100;return(0,l.jsx)("div",{className:"progress-bar",onMouseDown:function(){f(!0)},onMouseUp:function(){f(!1)},onMouseMove:function(e){if(h){var i=m.current.getBoundingClientRect(),s=i.left,r=i.width,a=e.clientX-s,c=n*(a/r);d(c),t.current.currentTime=c}},onClick:function(e){console.log(t);var i=m.current,s=i.getBoundingClientRect(),r=s.left,a=s.width,c=(e.clientX-r)/a,l=n*c;isFinite(l)&&(d(l),i.querySelector(".progress-bar-fill").style.width="".concat(100*c,"%"),t.current.currentTime=l)},ref:m,children:(0,l.jsx)("div",{className:"progress-bar-fill",style:{width:"".concat(x,"%"),transition:h?"none":"width 1s linear"}})})}var d=n(786),u=n(2664),v=n(9161),h=n(2637),f=n(2094),m=n(1192),x=function(e){var t=e.src,n=e.poster,r=e.preload,a=e.play,x=(e.currentDivIndex,e.id),p=e.channelName,j=(0,s.useRef)(null),g=(0,s.useState)(!1),N=(0,i.Z)(g,2),Z=N[0],b=N[1],k=(0,s.useState)(!1),y=(0,i.Z)(k,2),w=y[0],S=y[1],z=(0,s.useState)(0),C=(0,i.Z)(z,2),I=C[0],M=C[1];(0,s.useEffect)((function(){var e=j.current;e.addEventListener("loadedmetadata",(function(){M(e.duration)}))}),[]);(0,c.TH)();return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"shortVideoItem",children:[(0,l.jsx)("video",{ref:j,className:"shortVideos",src:t,poster:n,onClick:function(e){e.target.paused?e.target.play():e.target.pause()},onLoadedData:function(){a?(j.current.play(),console.log("played")):(j.current.pause(),console.log("paused"))},preload:r,loop:!0}),(0,l.jsx)("div",{className:"video-progress_bar",children:(0,l.jsx)(o,{videoRef:j,duration:I,setDuration:M})}),(0,l.jsxs)("div",{className:"video-details",children:[(0,l.jsxs)("div",{className:"channelName",children:[p,(0,l.jsx)("img",{src:n,alt:"channel-logo"})]}),(0,l.jsx)("div",{className:"subscribe-btn",children:(0,l.jsx)("p",{onClick:function(e){e.target.parentElement.classList.toggle("subscribed"),console.log("clicked")},children:"Subscribe"})})]}),(0,l.jsxs)("div",{className:"video-interactions",children:[(0,l.jsx)(m.Z,{disableInteractive:!0,title:"I like this",placement:"left",children:(0,l.jsxs)("div",{className:"interaction like",onClick:function(){b((function(e){return!e})),S(!1)},children:[(0,l.jsx)("div",{className:"icon",style:{background:Z?"var(--text-color)":"var(--dark-light)"},children:(0,l.jsx)(d.Z,{sx:{color:Z?"var(--dark)":"white"}})}),(0,l.jsxs)("p",{className:"detail",children:[String(x).slice(0,3),"K"]})]})}),(0,l.jsx)(m.Z,{disableInteractive:!0,title:"I dislike this",placement:"left",children:(0,l.jsxs)("div",{className:"interaction like",onClick:function(){b(!1),S((function(e){return!e}))},children:[(0,l.jsx)("div",{className:"icon",style:{background:w?"var(--text-color)":"var(--dark-light)"},children:(0,l.jsx)(u.Z,{sx:{color:w?"var(--dark)":"white"}})}),(0,l.jsx)("p",{className:"detail",children:"Dislike"})]})}),(0,l.jsx)(m.Z,{disableInteractive:!0,title:"Comments",placement:"left",children:(0,l.jsxs)("div",{className:"interaction comment",children:[(0,l.jsx)("div",{className:"icon",children:(0,l.jsx)(v.Z,{})}),(0,l.jsxs)("p",{className:"detail",children:[String(.4*Number(x)).slice(0,2),"K"]})]})}),(0,l.jsx)(m.Z,{disableInteractive:!0,title:"Share",placement:"left",children:(0,l.jsxs)("div",{className:"interaction share",children:[(0,l.jsx)("div",{className:"icon",style:{transformOrigin:"center",transform:"rotateX(180deg)"},children:(0,l.jsx)(h.Z,{})}),(0,l.jsx)("p",{className:"detail",children:"Share"})]})}),(0,l.jsxs)("div",{className:"interaction more",children:[(0,l.jsx)("div",{className:"icon",children:(0,l.jsx)(f.Z,{})}),(0,l.jsx)("p",{className:"detail"})]})]})]})})},p=function(){var e=(0,s.useContext)(r.i),t=e.query,n=e.page,c=(0,a.Z)(t,n,"portrait").result,o=(0,s.useState)(0),d=(0,i.Z)(o,2),u=d[0],v=d[1],h=(0,s.useState)(""),f=(0,i.Z)(h,2),m=f[0],p=f[1],j=(0,s.useState)(0),g=(0,i.Z)(j,2),N=g[0],Z=g[1],b=(0,s.useState)(0),k=(0,i.Z)(b,2),y=k[0],w=k[1],S=c.map((function(e,t){return(0,l.jsx)(x,{src:e.video_files[2].link,poster:e.image,preload:u===t?"auto":"none",play:u===t,currentDivIndex:u,id:e.id,channelName:e.user.name},e.id)})),z=function(e){"ArrowDown"!==e.key&&"ArrowUp"!==e.key||C("ArrowDown"===e.key?1:-1)},C=function(e){var t=u+e;t>=0&&t<S.length&&v(t)},I=function(e){0===N&&Z(e.touches[0].clientY)},M=function(e){w(e.touches[0].clientY)},D=function(e){if(0===y)return Z(0),void w(0);var t=u+(y-N>0?-1:1);t>=0&&t<S.length&&(v(t),setTimeout((function(){p("")}),500),p(y-N>0?"slide-up":"slide-down")),Z(0),w(0)};return(0,l.jsx)("div",{style:{position:"relative"},children:S.map((function(e,t){return(0,l.jsx)("div",{className:"slide-container ".concat(t===u?"":"hidden"," ").concat(t===u?m:""),tabIndex:0,onKeyDown:z,onTouchEnd:D,onTouchStart:I,onTouchMove:M,style:{position:"absolute",top:0,left:0,width:"100%",height:"calc(100vh - 55px)",transition:"transform 0.5s ease-out",transform:"translateY(".concat(t===u?0:t<u?"-100vh":"100vh",")")},children:e},t)}))})}},9161:function(e,t,n){var i=n(4836);t.Z=void 0;var s=i(n(5649)),r=n(184),a=(0,s.default)((0,r.jsx)("path",{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18zM18 14H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"}),"Comment");t.Z=a},2094:function(e,t,n){var i=n(4836);t.Z=void 0;var s=i(n(5649)),r=n(184),a=(0,s.default)((0,r.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");t.Z=a},2637:function(e,t,n){var i=n(4836);t.Z=void 0;var s=i(n(5649)),r=n(184),a=(0,s.default)((0,r.jsx)("path",{d:"M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11z"}),"Reply");t.Z=a},2664:function(e,t,n){var i=n(4836);t.Z=void 0;var s=i(n(5649)),r=n(184),a=(0,s.default)((0,r.jsx)("path",{d:"M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2zm4 0v12h4V3h-4z"}),"ThumbDown");t.Z=a},786:function(e,t,n){var i=n(4836);t.Z=void 0;var s=i(n(5649)),r=n(184),a=(0,s.default)((0,r.jsx)("path",{d:"M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z"}),"ThumbUp");t.Z=a}}]);
//# sourceMappingURL=880.58cd19e1.chunk.js.map